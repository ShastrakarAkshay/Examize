<div *ngIf="questionBank" class="question-cards">
    <mat-card class="p-4 mb-5 border-active header-card" (click)="editHeader()">
        <div *ngIf="!readonly">
            <mat-form-field appearance="fill" class="w-100 header-name mt-3">
                <mat-label>Quiz Name</mat-label>
                <input matInput [(ngModel)]="quizName">
            </mat-form-field>
            <mat-form-field appearance="fill" class="w-100">
                <mat-label>Description</mat-label>
                <input matInput [(ngModel)]="quizDescription">
            </mat-form-field>
        </div>
        <div *ngIf="readonly">
            <p class="mt-3 header-name">{{quizName || 'Blank Quiz'}}</p>
            <p class="mt-3 text-secondary">{{quizDescription || 'Description'}}</p>
            <div class="row mt-5 text-secondary">
                <div class="col-sm-6">Total Question : <span class="font-weight-bold">{{questionBank.length}}</span>
                </div>
                <div class="col-sm-6 text-right">
                    Total Marks : <span class="font-weight-bold">{{calculateTotalMarks()}}</span>
                </div>
            </div>
        </div>
    </mat-card>
    <mat-card class="p-4 mb-3" *ngFor="let data of questionBank, let i = index" (click)="editQuestion(data)"
        [ngClass]="{'border-active': data.readonly === false}">
        <div class="row question-header" *ngIf="!data.readonly">
            <div class="col-sm-7">
                <mat-form-field appearance="fill" class="w-100">
                    <mat-label>Question</mat-label>
                    <input matInput [(ngModel)]="data.question">
                </mat-form-field>
            </div>
            <div class="col-sm-5">
                <mat-form-field appearance="fill" class="w-100">
                    <mat-label>Question Type</mat-label>
                    <mat-select matNativeControl [(ngModel)]="data.questionType">
                        <mat-option *ngFor="let option of questionType" [value]="option.id">
                            <i class="mr-2" [ngClass]="option.iconClass"></i>
                            {{option.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <div class="row" *ngIf="data.readonly">
            <div class="col-sm-12">
                <h3 class="m-0">{{i+1}}. {{data.question.trim() || 'Question'}} </h3>
            </div>
        </div>

        <div [ngSwitch]="data.questionType">
            <question-multiple-choice *ngSwitchCase="1" [data]="data">
            </question-multiple-choice>
            <question-checkbox *ngSwitchCase="2" [data]="data"></question-checkbox>
        </div>

        <mat-divider *ngIf="!data.readonly"></mat-divider>

        <div class="row justify-content-between pt-4 pl-3 pr-3" *ngIf="!data.readonly">
            <div class="col-xs-7">
                <button mat-stroked-button color="primary" matTooltip="Add new question" class="p-0 pl-2 pr-2"
                    (click)="addQuestion(i)">
                    <span>New<span class="m-hide ml-1">question</span></span>
                </button>
                <button mat-icon-button color="basic" class="btn-hover ml-3" (click)="minusMarks(data.id)">
                    <mat-icon>remove_circle</mat-icon>
                </button>
                <span class="font-weight-bold">{{data.points}} <span class="m-hide">Marks</span></span>
                <button mat-icon-button color="basic" class="btn-hover" (click)="addMarks(data.id)">
                    <mat-icon>add_circle</mat-icon>
                </button>
            </div>
            <div class="col-xs-5">
                <button mat-icon-button color="basic" class="btn-hover float-right" matTooltip="Delete Question"
                    (click)="deleteQuestion(data.id)">
                    <mat-icon>delete_outline</mat-icon>
                </button>
                <mat-slide-toggle color="primary" class="pt-2 float-right mr-3" [checked]="data.required"
                    [(ngModel)]="data.required" matTooltip="Required">
                    <span class="m-hide">Required</span>
                </mat-slide-toggle>
            </div>
        </div>
        <div class="text-right" *ngIf="data.readonly">
            <span class="text-secondary">{{data.points}} Marks</span>
        </div>
    </mat-card>
    <div class="mt-3 mb-3 text-right">
        <button mat-raised-button color="basic" (click)="submit()">
            Submit
        </button>
    </div>
</div>